<div class="login-wrapper d-flex justify-content-center align-items-center vh-100 bg-light">
  <div class="card shadow border-0 px-4 py-4" style="width: 100%; max-width: 400px;">
    <div class="text-center mb-4">
      <i class="bi bi-person-circle" style="font-size: 3rem; color: #0d6efd;"></i>
      <h2 class="mt-2">Iniciar sesión</h2>
    </div>

    <%= form_with(scope: :usuario, url: session_path(:usuario), local: true, class: "needs-validation") do |form| %>
      <div class="mb-3">
        <%= form.label :email, 'Correo electrónico', class: 'form-label' %>
        <%= form.email_field :email, autofocus: true, class: "form-control", required: true %>
      </div>

      <div class="mb-3">
        <%= form.label :password, 'Contraseña', class: 'form-label' %>
        <div class="input-group">
          <%= form.password_field :password, autocomplete: "current-password", class: "form-control", required: true, id: "password-field" %>
          <span class="input-group-text" id="toggle-password" style="cursor: pointer;">
            <i class="bi bi-eye"></i>
          </span>
        </div>
      </div>

      <div class="form-check mb-3">
        <%= form.check_box :remember_me, class: "form-check-input", id: "remember_me" %>
        <%= form.label :remember_me, 'Recordarme', class: "form-check-label" %>
      </div>

      <div class="d-grid mb-2">
        <%= form.submit "Iniciar sesión", class: "btn btn-primary" %>
      </div>
    <% end %>

    <div class="text-center">
      <%= link_to "¿Olvidaste tu contraseña?", new_usuario_password_path, class: "text-decoration-none small" %><br>
      <%= link_to "Registrarme", new_usuario_registration_path, class: "text-decoration-none small" %>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const toggle = document.getElementById("toggle-password");
    const password = document.getElementById("password-field");

    if (toggle && password) {
      toggle.addEventListener("click", function () {
        const type = password.getAttribute("type") === "password" ? "text" : "password";
        password.setAttribute("type", type);
        toggle.innerHTML = type === "password"
          ? '<i class="bi bi-eye"></i>'
          : '<i class="bi bi-eye-slash"></i>';
      });
    }
  });
</script>